{"version":3,"file":"text.cjs","names":["PgColumnBuilder","entityKind","PgColumn"],"sources":["../../../src/pg-core/columns/text.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { PgTable } from '~/pg-core/table.ts';\nimport { type Equal, getColumnNameAndConfig, type Writable } from '~/utils.ts';\nimport { PgColumn, PgColumnBuilder } from './common.ts';\n\ntype PgTextBuilderConfig<TEnum extends [string, ...string[]]> = Equal<TEnum, [string, ...string[]]> extends true\n\t? { dataType: 'string'; data: string; driverParam: string }\n\t: { dataType: 'string enum'; data: TEnum[number]; enumValues: TEnum; driverParam: string };\n\nexport class PgTextBuilder<TEnum extends [string, ...string[]] = [string, ...string[]]> extends PgColumnBuilder<\n\tPgTextBuilderConfig<TEnum>,\n\t{ enumValues: TEnum }\n> {\n\tstatic override readonly [entityKind]: string = 'PgTextBuilder';\n\n\tconstructor(\n\t\tname: string,\n\t\tconfig: PgTextConfig<TEnum>,\n\t) {\n\t\tsuper(name, config.enum?.length ? 'string enum' : 'string', 'PgText');\n\t\tthis.config.enumValues = config.enum as TEnum;\n\t}\n\n\t/** @internal */\n\toverride build(table: PgTable<any>) {\n\t\treturn new PgText(table, this.config as any, this.config.enumValues);\n\t}\n}\n\nexport class PgText<TEnum extends [string, ...string[]] = [string, ...string[]]> extends PgColumn<\n\tEqual<TEnum, [string, ...string[]]> extends true ? 'string' : 'string enum'\n> {\n\tstatic override readonly [entityKind]: string = 'PgText';\n\toverride readonly enumValues;\n\n\tconstructor(\n\t\ttable: PgTable<any>,\n\t\tconfig: any,\n\t\tenumValues?: string[],\n\t) {\n\t\tsuper(table, config);\n\t\tthis.enumValues = enumValues;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn 'text';\n\t}\n}\n\nexport interface PgTextConfig<\n\tTEnum extends readonly string[] | undefined = readonly string[] | undefined,\n> {\n\tenum?: TEnum;\n}\n\n// Original function overloads style\nexport function text(): PgTextBuilder;\nexport function text(name: string): PgTextBuilder;\nexport function text<U extends string, T extends Readonly<[U, ...U[]]>>(\n\tconfig: PgTextConfig<T | Writable<T>>,\n): PgTextBuilder<Writable<T>>;\nexport function text<U extends string, T extends Readonly<[U, ...U[]]>>(\n\tname: string,\n\tconfig: PgTextConfig<T | Writable<T>>,\n): PgTextBuilder<Writable<T>>;\nexport function text(a?: string | PgTextConfig, b: PgTextConfig = {}): any {\n\tconst { name, config } = getColumnNameAndConfig<PgTextConfig>(a, b);\n\treturn new PgTextBuilder(name, config as any);\n}\n"],"mappings":";;;;;;AASA,IAAa,gBAAb,cAAgGA,+CAG9F;CACD,QAA0BC,0BAAsB;CAEhD,YACC,MACA,QACC;AACD,QAAM,MAAM,OAAO,MAAM,SAAS,gBAAgB,UAAU,SAAS;AACrE,OAAK,OAAO,aAAa,OAAO;;;CAIjC,AAAS,MAAM,OAAqB;AACnC,SAAO,IAAI,OAAO,OAAO,KAAK,QAAe,KAAK,OAAO,WAAW;;;AAItE,IAAa,SAAb,cAAyFC,wCAEvF;CACD,QAA0BD,0BAAsB;CAChD,AAAkB;CAElB,YACC,OACA,QACA,YACC;AACD,QAAM,OAAO,OAAO;AACpB,OAAK,aAAa;;CAGnB,aAAqB;AACpB,SAAO;;;AAoBT,SAAgB,KAAK,GAA2B,IAAkB,EAAE,EAAO;CAC1E,MAAM,EAAE,MAAM,kDAAgD,GAAG,EAAE;AACnE,QAAO,IAAI,cAAc,MAAM,OAAc"}