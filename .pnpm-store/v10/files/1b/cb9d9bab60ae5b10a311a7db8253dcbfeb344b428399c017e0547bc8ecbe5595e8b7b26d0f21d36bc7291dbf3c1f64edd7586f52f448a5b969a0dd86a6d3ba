{"version":3,"file":"unique-constraint.js","names":["name?: string","table: CockroachTable"],"sources":["../../src/cockroach-core/unique-constraint.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { CockroachColumn } from './columns/index.ts';\nimport type { CockroachTable } from './table.ts';\n\nexport function unique(name?: string): UniqueOnConstraintBuilder {\n\treturn new UniqueOnConstraintBuilder(name);\n}\n\nexport class UniqueConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'CockroachUniqueConstraintBuilder';\n\n\t/** @internal */\n\tcolumns: CockroachColumn[];\n\n\tconstructor(\n\t\tcolumns: CockroachColumn[],\n\t\tprivate name?: string,\n\t) {\n\t\tthis.columns = columns;\n\t}\n\n\t/** @internal */\n\tbuild(table: CockroachTable): UniqueConstraint {\n\t\treturn new UniqueConstraint(table, this.columns, this.name);\n\t}\n}\n\nexport class UniqueOnConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'CockroachUniqueOnConstraintBuilder';\n\n\t/** @internal */\n\tname?: string;\n\n\tconstructor(\n\t\tname?: string,\n\t) {\n\t\tthis.name = name;\n\t}\n\n\ton(...columns: [CockroachColumn, ...CockroachColumn[]]) {\n\t\treturn new UniqueConstraintBuilder(columns, this.name);\n\t}\n}\n\nexport class UniqueConstraint {\n\tstatic readonly [entityKind]: string = 'CockroachUniqueConstraint';\n\n\treadonly columns: CockroachColumn[];\n\treadonly name?: string;\n\treadonly isNameExplicit: boolean;\n\n\tconstructor(\n\t\treadonly table: CockroachTable,\n\t\tcolumns: CockroachColumn[],\n\t\tname?: string,\n\t) {\n\t\tthis.columns = columns;\n\t\tthis.name = name;\n\t\tthis.isNameExplicit = !!name;\n\t}\n\n\tgetName(): string | undefined {\n\t\treturn this.name;\n\t}\n}\n"],"mappings":";;;AAIA,SAAgB,OAAO,MAA0C;AAChE,QAAO,IAAI,0BAA0B,KAAK;;AAG3C,IAAa,0BAAb,MAAqC;CACpC,QAAiB,cAAsB;;CAGvC;CAEA,YACC,SACA,AAAQA,MACP;EADO;AAER,OAAK,UAAU;;;CAIhB,MAAM,OAAyC;AAC9C,SAAO,IAAI,iBAAiB,OAAO,KAAK,SAAS,KAAK,KAAK;;;AAI7D,IAAa,4BAAb,MAAuC;CACtC,QAAiB,cAAsB;;CAGvC;CAEA,YACC,MACC;AACD,OAAK,OAAO;;CAGb,GAAG,GAAG,SAAkD;AACvD,SAAO,IAAI,wBAAwB,SAAS,KAAK,KAAK;;;AAIxD,IAAa,mBAAb,MAA8B;CAC7B,QAAiB,cAAsB;CAEvC,AAAS;CACT,AAAS;CACT,AAAS;CAET,YACC,AAASC,OACT,SACA,MACC;EAHQ;AAIT,OAAK,UAAU;AACf,OAAK,OAAO;AACZ,OAAK,iBAAiB,CAAC,CAAC;;CAGzB,UAA8B;AAC7B,SAAO,KAAK"}