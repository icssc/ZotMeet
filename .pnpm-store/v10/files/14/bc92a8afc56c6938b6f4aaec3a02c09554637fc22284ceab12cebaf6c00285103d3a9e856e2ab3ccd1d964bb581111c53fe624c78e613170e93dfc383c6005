{"version":3,"file":"entity.js","names":[],"sources":["../src/entity.ts"],"sourcesContent":["export const entityKind = Symbol.for('drizzle:entityKind');\nexport const hasOwnEntityKind = Symbol.for('drizzle:hasOwnEntityKind');\n\nexport interface DrizzleEntity {\n\t[entityKind]: string;\n}\n\nexport type DrizzleEntityClass<T> =\n\t& ((abstract new(...args: any[]) => T) | (new(...args: any[]) => T))\n\t& DrizzleEntity;\n\nexport function is<T extends DrizzleEntityClass<any>>(value: any, type: T): value is InstanceType<T> {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof type) { // oxlint-disable-line drizzle-internal/no-instanceof\n\t\treturn true;\n\t}\n\n\tif (!Object.prototype.hasOwnProperty.call(type, entityKind)) {\n\t\tthrow new Error(\n\t\t\t`Class \"${\n\t\t\t\ttype.name ?? '<unknown>'\n\t\t\t}\" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`,\n\t\t);\n\t}\n\n\tlet cls = Object.getPrototypeOf(value).constructor;\n\tif (cls) {\n\t\t// Traverse the prototype chain to find the entityKind\n\t\twhile (cls) {\n\t\t\tif (entityKind in cls && cls[entityKind] === type[entityKind]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcls = Object.getPrototypeOf(cls);\n\t\t}\n\t}\n\n\treturn false;\n}\n"],"mappings":";AAAA,MAAa,aAAa,OAAO,IAAI,qBAAqB;AAC1D,MAAa,mBAAmB,OAAO,IAAI,2BAA2B;AAUtE,SAAgB,GAAsC,OAAY,MAAmC;AACpG,KAAI,CAAC,SAAS,OAAO,UAAU,SAC9B,QAAO;AAGR,KAAI,iBAAiB,KACpB,QAAO;AAGR,KAAI,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,WAAW,CAC1D,OAAM,IAAI,MACT,UACC,KAAK,QAAQ,YACb,+HACD;CAGF,IAAI,MAAM,OAAO,eAAe,MAAM,CAAC;AACvC,KAAI,IAEH,QAAO,KAAK;AACX,MAAI,cAAc,OAAO,IAAI,gBAAgB,KAAK,YACjD,QAAO;AAGR,QAAM,OAAO,eAAe,IAAI;;AAIlC,QAAO"}