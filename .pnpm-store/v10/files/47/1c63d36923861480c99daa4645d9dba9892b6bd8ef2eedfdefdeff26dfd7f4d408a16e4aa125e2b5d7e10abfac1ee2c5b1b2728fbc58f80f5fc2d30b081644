{"version":3,"file":"refresh-materialized-view.js","names":["session: PgSession","dialect: PgDialect"],"sources":["../../../src/pg-core/query-builders/refresh-materialized-view.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { PgDialect } from '~/pg-core/dialect.ts';\nimport type { PgQueryResultHKT, PgQueryResultKind, PgSession } from '~/pg-core/session.ts';\nimport type { PgMaterializedView } from '~/pg-core/view.ts';\nimport type { Query, SQL, SQLWrapper } from '~/sql/sql.ts';\n\n// eslint-disable-next-line no-unused-vars\nexport class PgRefreshMaterializedView<TQueryResult extends PgQueryResultHKT> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'PgRefreshMaterializedView';\n\n\tdeclare readonly _: {\n\t\treadonly dialect: 'pg';\n\t\treadonly result: PgQueryResultKind<TQueryResult, never>;\n\t};\n\n\tprotected config: {\n\t\tview: PgMaterializedView;\n\t\tconcurrently?: boolean;\n\t\twithNoData?: boolean;\n\t};\n\n\tconstructor(\n\t\tview: PgMaterializedView,\n\t\tprotected session: PgSession,\n\t\tprotected dialect: PgDialect,\n\t) {\n\t\tthis.config = { view };\n\t}\n\n\tconcurrently(): this {\n\t\tif (this.config.withNoData !== undefined) {\n\t\t\tthrow new Error('Cannot use concurrently and withNoData together');\n\t\t}\n\t\tthis.config.concurrently = true;\n\t\treturn this;\n\t}\n\n\twithNoData(): this {\n\t\tif (this.config.concurrently !== undefined) {\n\t\t\tthrow new Error('Cannot use concurrently and withNoData together');\n\t\t}\n\t\tthis.config.withNoData = true;\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tgetSQL(): SQL {\n\t\treturn this.dialect.buildRefreshMaterializedViewQuery(this.config);\n\t}\n\n\ttoSQL(): Query {\n\t\tconst { typings: _typings, ...rest } = this.dialect.sqlToQuery(this.getSQL());\n\t\treturn rest;\n\t}\n}\n"],"mappings":";;;AAOA,IAAa,4BAAb,MAAoG;CACnG,QAAiB,cAAsB;CAOvC,AAAU;CAMV,YACC,MACA,AAAUA,SACV,AAAUC,SACT;EAFS;EACA;AAEV,OAAK,SAAS,EAAE,MAAM;;CAGvB,eAAqB;AACpB,MAAI,KAAK,OAAO,eAAe,OAC9B,OAAM,IAAI,MAAM,kDAAkD;AAEnE,OAAK,OAAO,eAAe;AAC3B,SAAO;;CAGR,aAAmB;AAClB,MAAI,KAAK,OAAO,iBAAiB,OAChC,OAAM,IAAI,MAAM,kDAAkD;AAEnE,OAAK,OAAO,aAAa;AACzB,SAAO;;;CAIR,SAAc;AACb,SAAO,KAAK,QAAQ,kCAAkC,KAAK,OAAO;;CAGnE,QAAe;EACd,MAAM,EAAE,SAAS,UAAU,GAAG,SAAS,KAAK,QAAQ,WAAW,KAAK,QAAQ,CAAC;AAC7E,SAAO"}