{"version":3,"file":"bigint.cjs","names":["SingleStoreColumnBuilderWithAutoIncrement","entityKind","SingleStoreColumnWithAutoIncrement"],"sources":["../../../src/singlestore-core/columns/bigint.ts"],"sourcesContent":["import type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { SingleStoreTable } from '~/singlestore-core/table.ts';\nimport { type Equal, getColumnNameAndConfig } from '~/utils.ts';\nimport { SingleStoreColumnBuilderWithAutoIncrement, SingleStoreColumnWithAutoIncrement } from './common.ts';\n\nexport class SingleStoreBigInt53Builder<TUnsigned extends boolean | undefined>\n\textends SingleStoreColumnBuilderWithAutoIncrement<{\n\t\tdataType: Equal<TUnsigned, true> extends true ? 'number uint53' : 'number int53';\n\t\tdata: number;\n\t\tdriverParam: number | string;\n\t}, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigInt53Builder';\n\n\tconstructor(name: string, unsigned: boolean = false) {\n\t\tsuper(name, unsigned ? 'number uint53' : 'number int53' as any, 'SingleStoreBigInt53');\n\t\tthis.config.unsigned = unsigned;\n\t}\n\n\t/** @internal */\n\toverride build(table: SingleStoreTable) {\n\t\treturn new SingleStoreBigInt53(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class SingleStoreBigInt53<T extends ColumnBaseConfig<'number int53' | 'number uint53'>>\n\textends SingleStoreColumnWithAutoIncrement<T, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigInt53';\n\n\tgetSQLType(): string {\n\t\treturn `bigint${this.config.unsigned ? ' unsigned' : ''}`;\n\t}\n\n\toverride mapFromDriverValue(value: number | string): number {\n\t\tif (typeof value === 'number') {\n\t\t\treturn value;\n\t\t}\n\t\treturn Number(value);\n\t}\n}\n\nexport class SingleStoreBigInt64Builder<TUnsigned extends boolean | undefined>\n\textends SingleStoreColumnBuilderWithAutoIncrement<{\n\t\tdataType: Equal<TUnsigned, true> extends true ? 'bigint uint64' : 'bigint int64';\n\t\tdata: bigint;\n\t\tdriverParam: string;\n\t}, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigInt64Builder';\n\n\tconstructor(name: string, unsigned: boolean = false) {\n\t\tsuper(name, unsigned ? 'bigint uint64' : 'bigint int64' as any, 'SingleStoreBigInt64');\n\t\tthis.config.unsigned = unsigned;\n\t}\n\n\t/** @internal */\n\toverride build(table: SingleStoreTable) {\n\t\treturn new SingleStoreBigInt64(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class SingleStoreBigInt64<T extends ColumnBaseConfig<'bigint int64' | 'bigint uint64'>>\n\textends SingleStoreColumnWithAutoIncrement<T, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigInt64';\n\n\tgetSQLType(): string {\n\t\treturn `bigint${this.config.unsigned ? ' unsigned' : ''}`;\n\t}\n\n\t// eslint-disable-next-line unicorn/prefer-native-coercion-functions\n\toverride mapFromDriverValue(value: string): bigint {\n\t\treturn BigInt(value);\n\t}\n}\n\nexport class SingleStoreBigIntStringBuilder<TUnsigned extends boolean | undefined>\n\textends SingleStoreColumnBuilderWithAutoIncrement<{\n\t\tdataType: Equal<TUnsigned, true> extends true ? 'string uint64' : 'string int64';\n\t\tdata: string;\n\t\tdriverParam: string;\n\t}, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigIntStringBuilder';\n\n\tconstructor(name: string, unsigned: boolean = false) {\n\t\tsuper(name, unsigned ? 'string uint64' : 'string int64' as any, 'SingleStoreBigIntString');\n\t\tthis.config.unsigned = unsigned;\n\t}\n\n\t/** @internal */\n\toverride build(table: SingleStoreTable) {\n\t\treturn new SingleStoreBigIntString(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class SingleStoreBigIntString<T extends ColumnBaseConfig<'string int64' | 'string uint64'>>\n\textends SingleStoreColumnWithAutoIncrement<T, { unsigned: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'SingleStoreBigIntString';\n\n\tgetSQLType(): string {\n\t\treturn `bigint${this.config.unsigned ? ' unsigned' : ''}`;\n\t}\n}\n\nexport interface SingleStoreBigIntConfig<\n\tT extends 'number' | 'bigint' | 'string' = 'number' | 'bigint' | 'string',\n\tTUnsigned extends boolean | undefined = boolean | undefined,\n> {\n\tmode: T;\n\tunsigned?: TUnsigned;\n}\n\nexport function bigint<TMode extends SingleStoreBigIntConfig['mode'], TUnsigned extends boolean | undefined>(\n\tconfig: SingleStoreBigIntConfig<TMode, TUnsigned>,\n): TMode extends 'string' ? SingleStoreBigIntStringBuilder<TUnsigned>\n\t: TMode extends 'bigint' ? SingleStoreBigInt64Builder<TUnsigned>\n\t: SingleStoreBigInt53Builder<TUnsigned>;\nexport function bigint<TMode extends SingleStoreBigIntConfig['mode'], TUnsigned extends boolean | undefined>(\n\tname: string,\n\tconfig: SingleStoreBigIntConfig<TMode, TUnsigned>,\n): TMode extends 'string' ? SingleStoreBigIntStringBuilder<TUnsigned>\n\t: TMode extends 'bigint' ? SingleStoreBigInt64Builder<TUnsigned>\n\t: SingleStoreBigInt53Builder<TUnsigned>;\nexport function bigint(a?: string | SingleStoreBigIntConfig, b?: SingleStoreBigIntConfig) {\n\tconst { name, config } = getColumnNameAndConfig<SingleStoreBigIntConfig>(a, b);\n\tif (config.mode === 'number') {\n\t\treturn new SingleStoreBigInt53Builder(name, config.unsigned);\n\t}\n\tif (config.mode === 'string') {\n\t\treturn new SingleStoreBigIntStringBuilder(name, config.unsigned);\n\t}\n\treturn new SingleStoreBigInt64Builder(name, config.unsigned);\n}\n"],"mappings":";;;;;;AAMA,IAAa,6BAAb,cACSA,kFAKT;CACC,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,WAAoB,OAAO;AACpD,QAAM,MAAM,WAAW,kBAAkB,gBAAuB,sBAAsB;AACtF,OAAK,OAAO,WAAW;;;CAIxB,AAAS,MAAM,OAAyB;AACvC,SAAO,IAAI,oBACV,OACA,KAAK,OACL;;;AAIH,IAAa,sBAAb,cACSC,2EACT;CACC,QAA0BD,0BAAsB;CAEhD,aAAqB;AACpB,SAAO,SAAS,KAAK,OAAO,WAAW,cAAc;;CAGtD,AAAS,mBAAmB,OAAgC;AAC3D,MAAI,OAAO,UAAU,SACpB,QAAO;AAER,SAAO,OAAO,MAAM;;;AAItB,IAAa,6BAAb,cACSD,kFAKT;CACC,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,WAAoB,OAAO;AACpD,QAAM,MAAM,WAAW,kBAAkB,gBAAuB,sBAAsB;AACtF,OAAK,OAAO,WAAW;;;CAIxB,AAAS,MAAM,OAAyB;AACvC,SAAO,IAAI,oBACV,OACA,KAAK,OACL;;;AAIH,IAAa,sBAAb,cACSC,2EACT;CACC,QAA0BD,0BAAsB;CAEhD,aAAqB;AACpB,SAAO,SAAS,KAAK,OAAO,WAAW,cAAc;;CAItD,AAAS,mBAAmB,OAAuB;AAClD,SAAO,OAAO,MAAM;;;AAItB,IAAa,iCAAb,cACSD,kFAKT;CACC,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,WAAoB,OAAO;AACpD,QAAM,MAAM,WAAW,kBAAkB,gBAAuB,0BAA0B;AAC1F,OAAK,OAAO,WAAW;;;CAIxB,AAAS,MAAM,OAAyB;AACvC,SAAO,IAAI,wBACV,OACA,KAAK,OACL;;;AAIH,IAAa,0BAAb,cACSC,2EACT;CACC,QAA0BD,0BAAsB;CAEhD,aAAqB;AACpB,SAAO,SAAS,KAAK,OAAO,WAAW,cAAc;;;AAuBvD,SAAgB,OAAO,GAAsC,GAA6B;CACzF,MAAM,EAAE,MAAM,kDAA2D,GAAG,EAAE;AAC9E,KAAI,OAAO,SAAS,SACnB,QAAO,IAAI,2BAA2B,MAAM,OAAO,SAAS;AAE7D,KAAI,OAAO,SAAS,SACnB,QAAO,IAAI,+BAA+B,MAAM,OAAO,SAAS;AAEjE,QAAO,IAAI,2BAA2B,MAAM,OAAO,SAAS"}