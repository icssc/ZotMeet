{"version":3,"file":"int.common.js","names":[],"sources":["../../../src/pg-core/columns/int.common.ts"],"sourcesContent":["import type { GeneratedIdentityConfig } from '~/column-builder.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { PgSequenceOptions } from '../sequence.ts';\nimport type { HasIdentity, PgColumnBuilderConfig } from './common.ts';\nimport { PgColumnBuilder } from './common.ts';\n\nexport abstract class PgIntColumnBuilder<\n\tout T extends PgColumnBuilderConfig = PgColumnBuilderConfig,\n\tout TRuntimeConfig extends object = object,\n> extends PgColumnBuilder<T, TRuntimeConfig> {\n\tstatic override readonly [entityKind]: string = 'PgIntColumnBaseBuilder';\n\n\t/**\n\t * Adds an `ALWAYS AS IDENTITY` clause to the column definition.\n\t * Available for integer column types.\n\t */\n\tgeneratedAlwaysAsIdentity(\n\t\tsequence?: PgSequenceOptions & { name?: string },\n\t): HasIdentity<this, 'always'> {\n\t\tif (sequence) {\n\t\t\tconst { name, ...options } = sequence;\n\t\t\t(this.config as any).generatedIdentity = {\n\t\t\t\ttype: 'always',\n\t\t\t\tsequenceName: name,\n\t\t\t\tsequenceOptions: options,\n\t\t\t} satisfies GeneratedIdentityConfig;\n\t\t} else {\n\t\t\t(this.config as any).generatedIdentity = {\n\t\t\t\ttype: 'always',\n\t\t\t} satisfies GeneratedIdentityConfig;\n\t\t}\n\t\tthis.config.hasDefault = true;\n\t\tthis.config.notNull = true;\n\t\treturn this as HasIdentity<this, 'always'>;\n\t}\n\n\t/**\n\t * Adds a `BY DEFAULT AS IDENTITY` clause to the column definition.\n\t * Available for integer column types.\n\t */\n\tgeneratedByDefaultAsIdentity(\n\t\tsequence?: PgSequenceOptions & { name?: string },\n\t): HasIdentity<this, 'byDefault'> {\n\t\tif (sequence) {\n\t\t\tconst { name, ...options } = sequence;\n\t\t\t(this.config as any).generatedIdentity = {\n\t\t\t\ttype: 'byDefault',\n\t\t\t\tsequenceName: name,\n\t\t\t\tsequenceOptions: options,\n\t\t\t} satisfies GeneratedIdentityConfig;\n\t\t} else {\n\t\t\t(this.config as any).generatedIdentity = {\n\t\t\t\ttype: 'byDefault',\n\t\t\t} satisfies GeneratedIdentityConfig;\n\t\t}\n\t\tthis.config.hasDefault = true;\n\t\tthis.config.notNull = true;\n\t\treturn this as HasIdentity<this, 'byDefault'>;\n\t}\n}\n"],"mappings":";;;;AAMA,IAAsB,qBAAtB,cAGU,gBAAmC;CAC5C,QAA0B,cAAsB;;;;;CAMhD,0BACC,UAC8B;AAC9B,MAAI,UAAU;GACb,MAAM,EAAE,MAAM,GAAG,YAAY;AAC7B,GAAC,KAAK,OAAe,oBAAoB;IACxC,MAAM;IACN,cAAc;IACd,iBAAiB;IACjB;QAED,CAAC,KAAK,OAAe,oBAAoB,EACxC,MAAM,UACN;AAEF,OAAK,OAAO,aAAa;AACzB,OAAK,OAAO,UAAU;AACtB,SAAO;;;;;;CAOR,6BACC,UACiC;AACjC,MAAI,UAAU;GACb,MAAM,EAAE,MAAM,GAAG,YAAY;AAC7B,GAAC,KAAK,OAAe,oBAAoB;IACxC,MAAM;IACN,cAAc;IACd,iBAAiB;IACjB;QAED,CAAC,KAAK,OAAe,oBAAoB,EACxC,MAAM,aACN;AAEF,OAAK,OAAO,aAAa;AACzB,OAAK,OAAO,UAAU;AACtB,SAAO"}