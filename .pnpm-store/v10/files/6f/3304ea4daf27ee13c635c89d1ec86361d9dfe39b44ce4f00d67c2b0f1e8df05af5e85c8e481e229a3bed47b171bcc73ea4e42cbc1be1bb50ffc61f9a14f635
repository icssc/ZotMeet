{"version":3,"file":"bigint.cjs","names":["MsSqlColumnBuilderWithIdentity","entityKind","MsSqlColumnWithIdentity"],"sources":["../../../src/mssql-core/columns/bigint.ts"],"sourcesContent":["import type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnyMsSqlTable, MsSqlTable } from '~/mssql-core/table.ts';\nimport { getColumnNameAndConfig } from '~/utils.ts';\nimport { MsSqlColumnBuilderWithIdentity, MsSqlColumnWithIdentity } from './common.ts';\n\nexport class MsSqlBigIntBuilder<TMode extends 'number' | 'bigint' | 'string'> extends MsSqlColumnBuilderWithIdentity<{\n\tdataType: TMode extends 'string' ? 'string int64' : TMode extends 'number' ? 'number int53' : 'bigint int64';\n\tdata: TMode extends 'string' ? string : TMode extends 'number' ? number : bigint;\n\tdriverParam: string;\n}, MsSqlBigIntConfig> {\n\tstatic override readonly [entityKind]: string = 'MsSqlBigIntBuilder';\n\n\tconstructor(name: string, config: MsSqlBigIntConfig) {\n\t\tconst { mode } = config;\n\t\tsuper(\n\t\t\tname,\n\t\t\tmode === 'string' ? 'string int64' : mode === 'number' ? 'number int53' : 'bigint int64' as any,\n\t\t\tmode === 'string' ? 'MsSqlBigIntString' : mode === 'number' ? 'MsSqlBigIntNumber' : 'MsSqlBigInt',\n\t\t);\n\t\tthis.config.mode = mode;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyMsSqlTable<{ name: TTableName }>,\n\t) {\n\t\treturn new MsSqlBigInt(\n\t\t\ttable,\n\t\t\tthis.config,\n\t\t);\n\t}\n}\n\nexport class MsSqlBigInt<T extends ColumnBaseConfig<'bigint int64' | 'number int53' | 'string int64'>>\n\textends MsSqlColumnWithIdentity<T, MsSqlBigIntConfig>\n{\n\tstatic override readonly [entityKind]: string = 'MsSqlBigInt';\n\n\treadonly mode: 'number' | 'bigint' | 'string' = this.config.mode;\n\n\tgetSQLType(): string {\n\t\treturn `bigint`;\n\t}\n\n\tconstructor(table: MsSqlTable<any>, config: MsSqlBigIntBuilder<'string' | 'number' | 'bigint'>['config']) {\n\t\tsuper(table, config);\n\t\tthis.mode = config.mode;\n\t}\n\n\toverride mapFromDriverValue(value: string): T['data'] {\n\t\treturn this.mode === 'string' ? value.toString() : this.mode === 'number' ? Number(value) : BigInt(value);\n\t}\n}\n\ninterface MsSqlBigIntConfig<T extends 'number' | 'bigint' | 'string' = 'number' | 'bigint' | 'string'> {\n\tmode: T;\n}\n\nexport function bigint<TMode extends 'number' | 'bigint' | 'string'>(\n\tconfig: MsSqlBigIntConfig<TMode>,\n): MsSqlBigIntBuilder<TMode>;\nexport function bigint<TMode extends 'number' | 'bigint' | 'string'>(\n\tname: string,\n\tconfig: MsSqlBigIntConfig<TMode>,\n): MsSqlBigIntBuilder<TMode>;\nexport function bigint(a: string | MsSqlBigIntConfig, b?: MsSqlBigIntConfig) {\n\tconst { name, config } = getColumnNameAndConfig<MsSqlBigIntConfig>(a, b);\n\treturn new MsSqlBigIntBuilder(name, config);\n}\n"],"mappings":";;;;;;AAMA,IAAa,qBAAb,cAAsFA,iEAIhE;CACrB,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,QAA2B;EACpD,MAAM,EAAE,SAAS;AACjB,QACC,MACA,SAAS,WAAW,iBAAiB,SAAS,WAAW,iBAAiB,gBAC1E,SAAS,WAAW,sBAAsB,SAAS,WAAW,sBAAsB,cACpF;AACD,OAAK,OAAO,OAAO;;;CAIpB,AAAS,MACR,OACC;AACD,SAAO,IAAI,YACV,OACA,KAAK,OACL;;;AAIH,IAAa,cAAb,cACSC,0DACT;CACC,QAA0BD,0BAAsB;CAEhD,AAAS,OAAuC,KAAK,OAAO;CAE5D,aAAqB;AACpB,SAAO;;CAGR,YAAY,OAAwB,QAAsE;AACzG,QAAM,OAAO,OAAO;AACpB,OAAK,OAAO,OAAO;;CAGpB,AAAS,mBAAmB,OAA0B;AACrD,SAAO,KAAK,SAAS,WAAW,MAAM,UAAU,GAAG,KAAK,SAAS,WAAW,OAAO,MAAM,GAAG,OAAO,MAAM;;;AAe3G,SAAgB,OAAO,GAA+B,GAAuB;CAC5E,MAAM,EAAE,MAAM,kDAAqD,GAAG,EAAE;AACxE,QAAO,IAAI,mBAAmB,MAAM,OAAO"}