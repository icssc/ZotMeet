{"version":3,"file":"raw.cjs","names":["QueryPromise","entityKind","execute: () => Promise<TResult>","getSQL: () => SQL","dialect: SQLiteAsyncDialect","mapBatchResult: (result: unknown) => unknown"],"sources":["../../../src/sqlite-core/query-builders/raw.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport { QueryPromise } from '~/query-promise.ts';\nimport type { RunnableQuery } from '~/runnable-query.ts';\nimport type { PreparedQuery } from '~/session.ts';\nimport type { SQL, SQLWrapper } from '~/sql/sql.ts';\nimport type { SQLiteAsyncDialect } from '../dialect.ts';\n\ntype SQLiteRawAction = 'all' | 'get' | 'values' | 'run';\nexport interface SQLiteRawConfig {\n\taction: SQLiteRawAction;\n}\n\nexport interface SQLiteRaw<TResult> extends QueryPromise<TResult>, RunnableQuery<TResult, 'sqlite'>, SQLWrapper {}\n\nexport class SQLiteRaw<TResult> extends QueryPromise<TResult>\n\timplements RunnableQuery<TResult, 'sqlite'>, SQLWrapper, PreparedQuery\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteRaw';\n\n\tdeclare readonly _: {\n\t\treadonly dialect: 'sqlite';\n\t\treadonly result: TResult;\n\t};\n\n\t/** @internal */\n\tconfig: SQLiteRawConfig;\n\n\tconstructor(\n\t\tpublic execute: () => Promise<TResult>,\n\t\t/** @internal */\n\t\tpublic getSQL: () => SQL,\n\t\taction: SQLiteRawAction,\n\t\tprivate dialect: SQLiteAsyncDialect,\n\t\tprivate mapBatchResult: (result: unknown) => unknown,\n\t) {\n\t\tsuper();\n\t\tthis.config = { action };\n\t}\n\n\tgetQuery() {\n\t\treturn { ...this.dialect.sqlToQuery(this.getSQL()), method: this.config.action };\n\t}\n\n\tmapResult(result: unknown, isFromBatch?: boolean) {\n\t\treturn isFromBatch ? this.mapBatchResult(result) : result;\n\t}\n\n\t_prepare(): PreparedQuery {\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tisResponseInArrayMode(): boolean {\n\t\treturn false;\n\t}\n}\n"],"mappings":";;;;;AAcA,IAAa,YAAb,cAAwCA,gCAExC;CACC,QAA0BC,0BAAsB;;CAQhD;CAEA,YACC,AAAOC,SAEP,AAAOC,QACP,QACA,AAAQC,SACR,AAAQC,gBACP;AACD,SAAO;EAPA;EAEA;EAEC;EACA;AAGR,OAAK,SAAS,EAAE,QAAQ;;CAGzB,WAAW;AACV,SAAO;GAAE,GAAG,KAAK,QAAQ,WAAW,KAAK,QAAQ,CAAC;GAAE,QAAQ,KAAK,OAAO;GAAQ;;CAGjF,UAAU,QAAiB,aAAuB;AACjD,SAAO,cAAc,KAAK,eAAe,OAAO,GAAG;;CAGpD,WAA0B;AACzB,SAAO;;;CAIR,wBAAiC;AAChC,SAAO"}