{"version":3,"file":"primary-keys.js","names":["table: GelTable"],"sources":["../../src/gel-core/primary-keys.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { AnyGelColumn, GelColumn } from './columns/index.ts';\nimport { GelTable } from './table.ts';\n\nexport function primaryKey<\n\tTTableName extends string,\n\tTColumn extends AnyGelColumn<{ tableName: TTableName }>,\n\tTColumns extends AnyGelColumn<{ tableName: TTableName }>[],\n>(config: { name?: string; columns: [TColumn, ...TColumns] }): PrimaryKeyBuilder;\n/**\n * @deprecated: Please use primaryKey({ columns: [] }) instead of this function\n * @param columns\n */\nexport function primaryKey<\n\tTTableName extends string,\n\tTColumns extends AnyGelColumn<{ tableName: TTableName }>[],\n>(...columns: TColumns): PrimaryKeyBuilder;\nexport function primaryKey(...config: any) {\n\tif (config[0].columns) {\n\t\treturn new PrimaryKeyBuilder(config[0].columns, config[0].name);\n\t}\n\treturn new PrimaryKeyBuilder(config);\n}\n\nexport class PrimaryKeyBuilder {\n\tstatic readonly [entityKind]: string = 'GelPrimaryKeyBuilder';\n\n\t/** @internal */\n\tcolumns: GelColumn[];\n\n\t/** @internal */\n\tname?: string;\n\n\tconstructor(\n\t\tcolumns: GelColumn[],\n\t\tname?: string,\n\t) {\n\t\tthis.columns = columns;\n\t\tthis.name = name;\n\t}\n\n\t/** @internal */\n\tbuild(table: GelTable): PrimaryKey {\n\t\treturn new PrimaryKey(table, this.columns, this.name);\n\t}\n}\n\nexport class PrimaryKey {\n\tstatic readonly [entityKind]: string = 'GelPrimaryKey';\n\n\treadonly columns: AnyGelColumn<{}>[];\n\treadonly name?: string;\n\n\tconstructor(readonly table: GelTable, columns: AnyGelColumn<{}>[], name?: string) {\n\t\tthis.columns = columns;\n\t\tthis.name = name;\n\t}\n\n\tgetName(): string {\n\t\treturn this.name ?? `${this.table[GelTable.Symbol.Name]}_${this.columns.map((column) => column.name).join('_')}_pk`;\n\t}\n}\n"],"mappings":";;;;AAiBA,SAAgB,WAAW,GAAG,QAAa;AAC1C,KAAI,OAAO,GAAG,QACb,QAAO,IAAI,kBAAkB,OAAO,GAAG,SAAS,OAAO,GAAG,KAAK;AAEhE,QAAO,IAAI,kBAAkB,OAAO;;AAGrC,IAAa,oBAAb,MAA+B;CAC9B,QAAiB,cAAsB;;CAGvC;;CAGA;CAEA,YACC,SACA,MACC;AACD,OAAK,UAAU;AACf,OAAK,OAAO;;;CAIb,MAAM,OAA6B;AAClC,SAAO,IAAI,WAAW,OAAO,KAAK,SAAS,KAAK,KAAK;;;AAIvD,IAAa,aAAb,MAAwB;CACvB,QAAiB,cAAsB;CAEvC,AAAS;CACT,AAAS;CAET,YAAY,AAASA,OAAiB,SAA6B,MAAe;EAA7D;AACpB,OAAK,UAAU;AACf,OAAK,OAAO;;CAGb,UAAkB;AACjB,SAAO,KAAK,QAAQ,GAAG,KAAK,MAAM,SAAS,OAAO,MAAM,GAAG,KAAK,QAAQ,KAAK,WAAW,OAAO,KAAK,CAAC,KAAK,IAAI,CAAC"}