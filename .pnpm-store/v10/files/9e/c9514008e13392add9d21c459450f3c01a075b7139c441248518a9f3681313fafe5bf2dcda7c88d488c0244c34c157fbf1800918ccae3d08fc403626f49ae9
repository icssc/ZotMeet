const require_rolldown_runtime = require('../_virtual/rolldown_runtime.cjs');
let __migrator_ts = require("../migrator.cjs");

//#region src/bun-sqlite/migrator.ts
function migrate(db, config) {
	if (Array.isArray(config) || "migrationsJournal" in config) {
		const journal = Array.isArray(config) ? config : config.migrationsJournal;
		const migrationsTable = Array.isArray(config) ? void 0 : config.migrationsTable;
		const migrations$1 = journal.map((d) => ({
			sql: d.sql.split("--> statement-breakpoint"),
			folderMillis: d.timestamp,
			hash: "",
			bps: true
		}));
		return db.dialect.migrate(migrations$1, db.session, { migrationsTable });
	}
	const migrations = (0, __migrator_ts.readMigrationFiles)(config);
	return db.dialect.migrate(migrations, db.session, config);
}

//#endregion
exports.migrate = migrate;
//# sourceMappingURL=migrator.cjs.map