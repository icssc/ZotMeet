{"version":3,"file":"binary.cjs","names":["MsSqlColumnBuilder","entityKind","MsSqlColumn"],"sources":["../../../src/mssql-core/columns/binary.ts"],"sourcesContent":["import type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnyMsSqlTable } from '~/mssql-core/table.ts';\nimport { getColumnNameAndConfig } from '~/utils.ts';\nimport { MsSqlColumn, MsSqlColumnBuilder } from './common.ts';\n\nexport class MsSqlBinaryBuilder extends MsSqlColumnBuilder<\n\t{\n\t\tdataType: 'object buffer';\n\t\tdata: Buffer;\n\t\tdriverParam: Buffer;\n\t},\n\tMsSqlBinaryConfig & {\n\t\tsetLength: boolean;\n\t}\n> {\n\tstatic override readonly [entityKind]: string = 'MsSqlBinaryBuilder';\n\n\tconstructor(name: string, length: number | undefined) {\n\t\tsuper(name, 'object buffer', 'MsSqlBinary');\n\t\tthis.config.length = length ?? 1;\n\t\tthis.config.setLength = length !== undefined;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyMsSqlTable<{ name: TTableName }>,\n\t) {\n\t\treturn new MsSqlBinary(table, this.config);\n\t}\n}\n\nexport class MsSqlBinary<T extends ColumnBaseConfig<'object buffer'>> extends MsSqlColumn<\n\tT,\n\tMsSqlBinaryConfig & { setLength: boolean }\n> {\n\tstatic override readonly [entityKind]: string = 'MsSqlBinary';\n\n\tgetSQLType(): string {\n\t\treturn this.config.setLength ? `binary(${this.length})` : `binary`;\n\t}\n}\n\nexport interface MsSqlBinaryConfig {\n\tlength?: number;\n}\n\nexport function binary(\n\tconfig?: MsSqlBinaryConfig,\n): MsSqlBinaryBuilder;\nexport function binary(\n\tname: string,\n\tconfig?: MsSqlBinaryConfig,\n): MsSqlBinaryBuilder;\nexport function binary(a?: string | MsSqlBinaryConfig, b: MsSqlBinaryConfig = {}) {\n\tconst { name, config } = getColumnNameAndConfig<MsSqlBinaryConfig>(a, b);\n\treturn new MsSqlBinaryBuilder(name, config.length);\n}\n"],"mappings":";;;;;;AAMA,IAAa,qBAAb,cAAwCA,qDAStC;CACD,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,QAA4B;AACrD,QAAM,MAAM,iBAAiB,cAAc;AAC3C,OAAK,OAAO,SAAS,UAAU;AAC/B,OAAK,OAAO,YAAY,WAAW;;;CAIpC,AAAS,MACR,OACC;AACD,SAAO,IAAI,YAAY,OAAO,KAAK,OAAO;;;AAI5C,IAAa,cAAb,cAA8EC,8CAG5E;CACD,QAA0BD,0BAAsB;CAEhD,aAAqB;AACpB,SAAO,KAAK,OAAO,YAAY,UAAU,KAAK,OAAO,KAAK;;;AAe5D,SAAgB,OAAO,GAAgC,IAAuB,EAAE,EAAE;CACjF,MAAM,EAAE,MAAM,kDAAqD,GAAG,EAAE;AACxE,QAAO,IAAI,mBAAmB,MAAM,OAAO,OAAO"}