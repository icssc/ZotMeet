{"version":3,"file":"driver.js","names":["postgresConstructor","mock","sqliteConstructor","mysqlConstructor"],"sources":["../../src/bun-sql/driver.ts"],"sourcesContent":["import type { SQL } from 'bun';\nimport type { AnyRelations, EmptyRelations } from '~/relations.ts';\nimport type { DrizzleConfig } from '~/utils.ts';\nimport { type BunMySqlDatabase, type BunMySqlDrizzleConfig, drizzle as mysqlConstructor } from './mysql/driver.ts';\nimport { type BunSQLDatabase, drizzle as postgresConstructor } from './postgres/driver.ts';\nimport { type BunSQLiteDatabase, drizzle as sqliteConstructor } from './sqlite/driver.ts';\n\nexport function drizzle<\n\tTSchema extends Record<string, unknown> = Record<string, never>,\n\tTRelations extends AnyRelations = EmptyRelations,\n\tTClient extends SQL = SQL,\n>(\n\t...params: [\n\t\tstring,\n\t] | [\n\t\tstring,\n\t\tDrizzleConfig<TSchema, TRelations>,\n\t] | [\n\t\t(\n\t\t\t& DrizzleConfig<TSchema, TRelations>\n\t\t\t& ({\n\t\t\t\tconnection: string | ({ url?: string } & SQL.Options);\n\t\t\t} | {\n\t\t\t\tclient: TClient;\n\t\t\t})\n\t\t),\n\t]\n): BunSQLDatabase<TSchema, TRelations> & {\n\t$client: TClient;\n} {\n\treturn postgresConstructor(...params);\n}\n\nexport namespace drizzle {\n\texport function mock<\n\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\tTRelations extends AnyRelations = EmptyRelations,\n\t>(config?: DrizzleConfig<TSchema, TRelations>): BunSQLDatabase<TSchema, TRelations> & {\n\t\t$client: '$client is not available on drizzle.mock()';\n\t} {\n\t\treturn postgresConstructor.mock(config);\n\t}\n\n\texport function postgres<\n\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\tTClient extends SQL = SQL,\n\t>(\n\t\t...params: [\n\t\t\tstring,\n\t\t] | [\n\t\t\tstring,\n\t\t\tDrizzleConfig<TSchema, TRelations>,\n\t\t] | [\n\t\t\t(\n\t\t\t\t& DrizzleConfig<TSchema, TRelations>\n\t\t\t\t& ({\n\t\t\t\t\tconnection: string | ({ url?: string } & SQL.Options);\n\t\t\t\t} | {\n\t\t\t\t\tclient: TClient;\n\t\t\t\t})\n\t\t\t),\n\t\t]\n\t): BunSQLDatabase<TSchema, TRelations> & {\n\t\t$client: TClient;\n\t} {\n\t\treturn postgresConstructor(...params);\n\t}\n\n\texport namespace postgres {\n\t\texport function mock<\n\t\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\t>(config?: DrizzleConfig<TSchema, TRelations>): BunSQLDatabase<TSchema, TRelations> & {\n\t\t\t$client: '$client is not available on drizzle.mock()';\n\t\t} {\n\t\t\treturn postgresConstructor.mock(config);\n\t\t}\n\t}\n\n\texport function sqlite<\n\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\tTClient extends SQL = SQL,\n\t>(\n\t\t...params: [\n\t\t\tstring,\n\t\t] | [\n\t\t\tstring,\n\t\t\tDrizzleConfig<TSchema, TRelations>,\n\t\t] | [\n\t\t\t(\n\t\t\t\t& DrizzleConfig<TSchema, TRelations>\n\t\t\t\t& ({\n\t\t\t\t\tconnection: string | ({ url?: string } & SQL.Options);\n\t\t\t\t} | {\n\t\t\t\t\tclient: TClient;\n\t\t\t\t})\n\t\t\t),\n\t\t]\n\t): BunSQLiteDatabase<TSchema, TRelations> & {\n\t\t$client: TClient;\n\t} {\n\t\treturn sqliteConstructor(...params);\n\t}\n\n\texport namespace sqlite {\n\t\texport function mock<\n\t\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\t>(config?: DrizzleConfig<TSchema, TRelations>): BunSQLiteDatabase<TSchema, TRelations> & {\n\t\t\t$client: '$client is not available on drizzle.mock()';\n\t\t} {\n\t\t\treturn sqliteConstructor.mock(config);\n\t\t}\n\t}\n\n\texport function mysql<\n\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\tTClient extends SQL = SQL,\n\t>(\n\t\t...params: [\n\t\t\tstring,\n\t\t] | [\n\t\t\tstring,\n\t\t\tBunMySqlDrizzleConfig<TSchema, TRelations>,\n\t\t] | [\n\t\t\t(\n\t\t\t\t& BunMySqlDrizzleConfig<TSchema, TRelations>\n\t\t\t\t& ({\n\t\t\t\t\tconnection: string | ({ url?: string } & SQL.Options);\n\t\t\t\t} | {\n\t\t\t\t\tclient: TClient;\n\t\t\t\t})\n\t\t\t),\n\t\t]\n\t): BunMySqlDatabase<TSchema, TRelations> & {\n\t\t$client: TClient;\n\t} {\n\t\treturn mysqlConstructor(...params) as BunMySqlDatabase<TSchema, TRelations> & {\n\t\t\t$client: TClient;\n\t\t};\n\t}\n\n\texport namespace mysql {\n\t\texport function mock<\n\t\t\tTSchema extends Record<string, unknown> = Record<string, never>,\n\t\t\tTRelations extends AnyRelations = EmptyRelations,\n\t\t>(config?: BunMySqlDrizzleConfig<TSchema, TRelations>): BunMySqlDatabase<TSchema, TRelations> & {\n\t\t\t$client: '$client is not available on drizzle.mock()';\n\t\t} {\n\t\t\treturn mysqlConstructor.mock(config) as BunMySqlDatabase<TSchema, TRelations> & {\n\t\t\t\t$client: '$client is not available on drizzle.mock()';\n\t\t\t};\n\t\t}\n\t}\n}\n"],"mappings":";;;;;AAOA,SAAgB,QAKf,GAAG,QAiBF;AACD,QAAOA,UAAoB,GAAG,OAAO;;;CAI9B,SAAS,KAGd,QAEA;AACD,SAAOA,UAAoB,KAAK,OAAO;;;CAGjC,SAAS,SAKf,GAAG,QAiBF;AACD,SAAOA,UAAoB,GAAG,OAAO;;;AAG/B;EACC,SAASC,OAGd,QAEA;AACD,UAAOD,UAAoB,KAAK,OAAO;;;;CAIlC,SAAS,OAKf,GAAG,QAiBF;AACD,SAAOE,UAAkB,GAAG,OAAO;;;AAG7B;EACC,SAASD,OAGd,QAEA;AACD,UAAOC,UAAkB,KAAK,OAAO;;;;CAIhC,SAAS,MAKf,GAAG,QAiBF;AACD,SAAOC,UAAiB,GAAG,OAAO;;;AAK5B;EACC,SAASF,OAGd,QAEA;AACD,UAAOE,UAAiB,KAAK,OAAO"}