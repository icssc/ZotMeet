{"version":3,"file":"driver.cjs","names":["SQLiteAsyncDialect","logger: Logger | undefined","DefaultLogger","Prisma","PrismaSQLiteSession","BaseSQLiteDatabase"],"sources":["../../../src/prisma/sqlite/driver.ts"],"sourcesContent":["import { Prisma } from '@prisma/client';\n\nimport type { Logger } from '~/logger.ts';\nimport { DefaultLogger } from '~/logger.ts';\nimport { BaseSQLiteDatabase, SQLiteAsyncDialect } from '~/sqlite-core/index.ts';\nimport type { DrizzleConfig } from '~/utils.ts';\nimport { PrismaSQLiteSession } from './session.ts';\n\nexport type PrismaSQLiteDatabase = BaseSQLiteDatabase<'async', []>;\n\nexport type PrismaSQLiteConfig = Omit<DrizzleConfig, 'schema'>;\n\nexport function drizzle(config: PrismaSQLiteConfig = {}) {\n\tconst dialect = new SQLiteAsyncDialect();\n\tlet logger: Logger | undefined;\n\tif (config.logger === true) {\n\t\tlogger = new DefaultLogger();\n\t} else if (config.logger !== false) {\n\t\tlogger = config.logger;\n\t}\n\n\treturn Prisma.defineExtension((client) => {\n\t\tconst session = new PrismaSQLiteSession(client, dialect, { logger });\n\n\t\treturn client.$extends({\n\t\t\tname: 'drizzle',\n\t\t\tclient: {\n\t\t\t\t$drizzle: new BaseSQLiteDatabase(\n\t\t\t\t\t'async',\n\t\t\t\t\tdialect,\n\t\t\t\t\tsession,\n\t\t\t\t\t{},\n\t\t\t\t\tundefined,\n\t\t\t\t) as PrismaSQLiteDatabase,\n\t\t\t},\n\t\t});\n\t});\n}\n"],"mappings":";;;;;;;AAYA,SAAgB,QAAQ,SAA6B,EAAE,EAAE;CACxD,MAAM,UAAU,IAAIA,2CAAoB;CACxC,IAAIC;AACJ,KAAI,OAAO,WAAW,KACrB,UAAS,IAAIC,2BAAe;UAClB,OAAO,WAAW,MAC5B,UAAS,OAAO;AAGjB,QAAOC,sBAAO,iBAAiB,WAAW;EACzC,MAAM,UAAU,IAAIC,kDAAoB,QAAQ,SAAS,EAAE,QAAQ,CAAC;AAEpE,SAAO,OAAO,SAAS;GACtB,MAAM;GACN,QAAQ,EACP,UAAU,IAAIC,0CACb,SACA,SACA,SACA,EAAE,EACF,OACA,EACD;GACD,CAAC;GACD"}