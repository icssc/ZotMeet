{"version":3,"sources":["../../../src/build/sort-by-page-exts.ts"],"sourcesContent":["import { extname } from 'path/posix'\nimport type { PageExtensions } from './page-extensions-type'\n\nexport function sortByPageExts(pageExtensions: PageExtensions) {\n  return (a: string, b: string) => {\n    // prioritize entries according to pageExtensions order\n    // for consistency as fs order can differ across systems\n    // NOTE: this is reversed so preferred comes last and\n    // overrides prior\n    const aExt = extname(a)\n    const bExt = extname(b)\n\n    const aNoExt = a.substring(0, a.length - aExt.length)\n    const bNoExt = b.substring(0, b.length - bExt.length)\n\n    if (aNoExt !== bNoExt) return 0\n\n    // find extension index (skip '.' as pageExtensions doesn't have it)\n    const aExtIndex = pageExtensions.indexOf(aExt.substring(1))\n    const bExtIndex = pageExtensions.indexOf(bExt.substring(1))\n\n    return bExtIndex - aExtIndex\n  }\n}\n"],"names":["extname","sortByPageExts","pageExtensions","a","b","aExt","bExt","aNoExt","substring","length","bNoExt","aExtIndex","indexOf","bExtIndex"],"mappings":"AAAA,SAASA,OAAO,QAAQ,aAAY;AAGpC,OAAO,SAASC,eAAeC,cAA8B;IAC3D,OAAO,CAACC,GAAWC;QACjB,uDAAuD;QACvD,wDAAwD;QACxD,qDAAqD;QACrD,kBAAkB;QAClB,MAAMC,OAAOL,QAAQG;QACrB,MAAMG,OAAON,QAAQI;QAErB,MAAMG,SAASJ,EAAEK,SAAS,CAAC,GAAGL,EAAEM,MAAM,GAAGJ,KAAKI,MAAM;QACpD,MAAMC,SAASN,EAAEI,SAAS,CAAC,GAAGJ,EAAEK,MAAM,GAAGH,KAAKG,MAAM;QAEpD,IAAIF,WAAWG,QAAQ,OAAO;QAE9B,oEAAoE;QACpE,MAAMC,YAAYT,eAAeU,OAAO,CAACP,KAAKG,SAAS,CAAC;QACxD,MAAMK,YAAYX,eAAeU,OAAO,CAACN,KAAKE,SAAS,CAAC;QAExD,OAAOK,YAAYF;IACrB;AACF","ignoreList":[0]}