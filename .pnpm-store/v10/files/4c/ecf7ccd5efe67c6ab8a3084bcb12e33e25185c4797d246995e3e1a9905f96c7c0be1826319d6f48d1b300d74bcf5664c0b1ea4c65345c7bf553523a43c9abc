{"version":3,"file":"interval.cjs","names":["PgColumnBuilder","entityKind","PgColumn"],"sources":["../../../src/pg-core/columns/interval.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { PgTable } from '~/pg-core/table.ts';\nimport { getColumnNameAndConfig } from '~/utils.ts';\nimport { PgColumn, PgColumnBuilder } from './common.ts';\nimport type { Precision } from './timestamp.ts';\n\nexport class PgIntervalBuilder extends PgColumnBuilder<{\n\tdataType: 'string interval';\n\tdata: string;\n\tdriverParam: string;\n}, { intervalConfig: IntervalConfig }> {\n\tstatic override readonly [entityKind]: string = 'PgIntervalBuilder';\n\n\tconstructor(\n\t\tname: string,\n\t\tintervalConfig: IntervalConfig,\n\t) {\n\t\tsuper(name, 'string interval', 'PgInterval');\n\t\tthis.config.intervalConfig = intervalConfig;\n\t}\n\n\t/** @internal */\n\toverride build(table: PgTable<any>) {\n\t\treturn new PgInterval(table, this.config as any);\n\t}\n}\n\nexport class PgInterval extends PgColumn<'string interval'> {\n\tstatic override readonly [entityKind]: string = 'PgInterval';\n\n\treadonly fields: IntervalConfig['fields'];\n\treadonly precision: IntervalConfig['precision'];\n\n\tconstructor(table: PgTable<any>, config: PgIntervalBuilder['config']) {\n\t\tsuper(table, config);\n\t\tthis.fields = config.intervalConfig.fields;\n\t\tthis.precision = config.intervalConfig.precision;\n\t}\n\n\tgetSQLType(): string {\n\t\tconst fields = this.fields ? ` ${this.fields}` : '';\n\t\tconst precision = this.precision ? `(${this.precision})` : '';\n\t\treturn `interval${fields}${precision}`;\n\t}\n}\n\nexport interface IntervalConfig {\n\tfields?:\n\t\t| 'year'\n\t\t| 'month'\n\t\t| 'day'\n\t\t| 'hour'\n\t\t| 'minute'\n\t\t| 'second'\n\t\t| 'year to month'\n\t\t| 'day to hour'\n\t\t| 'day to minute'\n\t\t| 'day to second'\n\t\t| 'hour to minute'\n\t\t| 'hour to second'\n\t\t| 'minute to second';\n\tprecision?: Precision;\n}\n\nexport function interval(\n\tconfig?: IntervalConfig,\n): PgIntervalBuilder;\nexport function interval(\n\tname: string,\n\tconfig?: IntervalConfig,\n): PgIntervalBuilder;\nexport function interval(a?: string | IntervalConfig, b: IntervalConfig = {}) {\n\tconst { name, config } = getColumnNameAndConfig<IntervalConfig>(a, b);\n\treturn new PgIntervalBuilder(name, config);\n}\n"],"mappings":";;;;;;AAMA,IAAa,oBAAb,cAAuCA,+CAIA;CACtC,QAA0BC,0BAAsB;CAEhD,YACC,MACA,gBACC;AACD,QAAM,MAAM,mBAAmB,aAAa;AAC5C,OAAK,OAAO,iBAAiB;;;CAI9B,AAAS,MAAM,OAAqB;AACnC,SAAO,IAAI,WAAW,OAAO,KAAK,OAAc;;;AAIlD,IAAa,aAAb,cAAgCC,wCAA4B;CAC3D,QAA0BD,0BAAsB;CAEhD,AAAS;CACT,AAAS;CAET,YAAY,OAAqB,QAAqC;AACrE,QAAM,OAAO,OAAO;AACpB,OAAK,SAAS,OAAO,eAAe;AACpC,OAAK,YAAY,OAAO,eAAe;;CAGxC,aAAqB;AAGpB,SAAO,WAFQ,KAAK,SAAS,IAAI,KAAK,WAAW,KAC/B,KAAK,YAAY,IAAI,KAAK,UAAU,KAAK;;;AA8B7D,SAAgB,SAAS,GAA6B,IAAoB,EAAE,EAAE;CAC7E,MAAM,EAAE,MAAM,kDAAkD,GAAG,EAAE;AACrE,QAAO,IAAI,kBAAkB,MAAM,OAAO"}