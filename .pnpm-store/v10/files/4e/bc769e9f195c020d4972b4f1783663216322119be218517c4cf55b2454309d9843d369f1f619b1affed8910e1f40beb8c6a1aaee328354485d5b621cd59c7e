{"version":3,"file":"varbinary.cjs","names":["SingleStoreColumnBuilder","entityKind","SingleStoreColumn","str: string[]"],"sources":["../../../src/singlestore-core/columns/varbinary.ts"],"sourcesContent":["import type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { SingleStoreTable } from '~/singlestore-core/table.ts';\nimport { getColumnNameAndConfig } from '~/utils.ts';\nimport { SingleStoreColumn, SingleStoreColumnBuilder } from './common.ts';\n\nexport class SingleStoreVarBinaryBuilder extends SingleStoreColumnBuilder<{\n\tdataType: 'string binary';\n\tdata: string;\n\tdriverParam: string;\n}, SingleStoreVarbinaryOptions> {\n\tstatic override readonly [entityKind]: string = 'SingleStoreVarBinaryBuilder';\n\n\t/** @internal */\n\tconstructor(name: string, config: SingleStoreVarbinaryOptions) {\n\t\tsuper(name, 'string binary', 'SingleStoreVarBinary');\n\t\tthis.config.length = config.length;\n\t}\n\n\t/** @internal */\n\toverride build(table: SingleStoreTable) {\n\t\treturn new SingleStoreVarBinary(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class SingleStoreVarBinary<\n\tT extends ColumnBaseConfig<'string binary'>,\n> extends SingleStoreColumn<T, SingleStoreVarbinaryOptions> {\n\tstatic override readonly [entityKind]: string = 'SingleStoreVarBinary';\n\n\toverride mapFromDriverValue(value: string | Buffer | Uint8Array): string {\n\t\tif (typeof value === 'string') return value;\n\t\tif (Buffer.isBuffer(value)) return value.toString();\n\n\t\tconst str: string[] = [];\n\t\tfor (const v of value) {\n\t\t\tstr.push(v === 49 ? '1' : '0');\n\t\t}\n\n\t\treturn str.join('');\n\t}\n\n\tgetSQLType(): string {\n\t\treturn this.length === undefined ? `varbinary` : `varbinary(${this.length})`;\n\t}\n}\n\nexport interface SingleStoreVarbinaryOptions {\n\tlength: number;\n}\n\nexport function varbinary(\n\tconfig: SingleStoreVarbinaryOptions,\n): SingleStoreVarBinaryBuilder;\nexport function varbinary(\n\tname: string,\n\tconfig: SingleStoreVarbinaryOptions,\n): SingleStoreVarBinaryBuilder;\nexport function varbinary(a?: string | SingleStoreVarbinaryOptions, b?: SingleStoreVarbinaryOptions) {\n\tconst { name, config } = getColumnNameAndConfig<SingleStoreVarbinaryOptions>(a, b);\n\treturn new SingleStoreVarBinaryBuilder(name, config);\n}\n"],"mappings":";;;;;;AAMA,IAAa,8BAAb,cAAiDA,iEAIjB;CAC/B,QAA0BC,0BAAsB;;CAGhD,YAAY,MAAc,QAAqC;AAC9D,QAAM,MAAM,iBAAiB,uBAAuB;AACpD,OAAK,OAAO,SAAS,OAAO;;;CAI7B,AAAS,MAAM,OAAyB;AACvC,SAAO,IAAI,qBACV,OACA,KAAK,OACL;;;AAIH,IAAa,uBAAb,cAEUC,0DAAkD;CAC3D,QAA0BD,0BAAsB;CAEhD,AAAS,mBAAmB,OAA6C;AACxE,MAAI,OAAO,UAAU,SAAU,QAAO;AACtC,MAAI,OAAO,SAAS,MAAM,CAAE,QAAO,MAAM,UAAU;EAEnD,MAAME,MAAgB,EAAE;AACxB,OAAK,MAAM,KAAK,MACf,KAAI,KAAK,MAAM,KAAK,MAAM,IAAI;AAG/B,SAAO,IAAI,KAAK,GAAG;;CAGpB,aAAqB;AACpB,SAAO,KAAK,WAAW,SAAY,cAAc,aAAa,KAAK,OAAO;;;AAe5E,SAAgB,UAAU,GAA0C,GAAiC;CACpG,MAAM,EAAE,MAAM,kDAA+D,GAAG,EAAE;AAClF,QAAO,IAAI,4BAA4B,MAAM,OAAO"}