{"version":3,"file":"char.cjs","names":["CockroachColumnWithArrayBuilder","entityKind","CockroachColumn"],"sources":["../../../src/cockroach-core/columns/char.ts"],"sourcesContent":["import type { AnyCockroachTable } from '~/cockroach-core/table.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport { type Equal, getColumnNameAndConfig, type Writable } from '~/utils.ts';\nimport { CockroachColumn, CockroachColumnWithArrayBuilder } from './common.ts';\n\nexport class CockroachCharBuilder<\n\tTEnum extends [string, ...string[]],\n> extends CockroachColumnWithArrayBuilder<\n\t{\n\t\tdataType: Equal<TEnum, [string, ...string[]]> extends true ? 'string' : 'string enum';\n\t\tdata: TEnum[number];\n\t\tenumValues: TEnum;\n\t\tdriverParam: string;\n\t},\n\t{ enumValues: TEnum | undefined; length: number; setLength: boolean }\n> {\n\tstatic override readonly [entityKind]: string = 'CockroachCharBuilder';\n\n\tconstructor(name: string, config: CockroachCharConfig<TEnum>) {\n\t\tsuper(name, config.enum?.length ? 'string enum' : 'string', 'CockroachChar');\n\t\tthis.config.enumValues = config.enum;\n\t\tthis.config.length = config.length ?? 1;\n\t\tthis.config.setLength = config.length !== undefined;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyCockroachTable<{ name: TTableName }>,\n\t) {\n\t\treturn new CockroachChar(\n\t\t\ttable,\n\t\t\tthis.config,\n\t\t);\n\t}\n}\n\nexport class CockroachChar<T extends ColumnBaseConfig<'string' | 'string enum'>>\n\textends CockroachColumn<T, { enumValues: T['enumValues']; setLength: boolean }>\n{\n\tstatic override readonly [entityKind]: string = 'CockroachChar';\n\n\toverride readonly enumValues = this.config.enumValues;\n\n\tgetSQLType(): string {\n\t\treturn this.config.setLength ? `char(${this.length})` : `char`;\n\t}\n}\n\nexport interface CockroachCharConfig<\n\tTEnum extends readonly string[] | string[] | undefined = readonly string[] | string[] | undefined,\n> {\n\tenum?: TEnum;\n\tlength?: number | undefined;\n}\n\nexport function char<U extends string, T extends Readonly<[U, ...U[]]>>(\n\tconfig?: CockroachCharConfig<T | Writable<T>>,\n): CockroachCharBuilder<Writable<T>>;\nexport function char<\n\tU extends string,\n\tT extends Readonly<[U, ...U[]]>,\n>(\n\tname: string,\n\tconfig?: CockroachCharConfig<T | Writable<T>>,\n): CockroachCharBuilder<Writable<T>>;\nexport function char(a?: string | CockroachCharConfig, b: CockroachCharConfig = {}): any {\n\tconst { name, config } = getColumnNameAndConfig<CockroachCharConfig>(a, b);\n\treturn new CockroachCharBuilder(name, config as any);\n}\n"],"mappings":";;;;;;AAMA,IAAa,uBAAb,cAEUA,sEAQR;CACD,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,QAAoC;AAC7D,QAAM,MAAM,OAAO,MAAM,SAAS,gBAAgB,UAAU,gBAAgB;AAC5E,OAAK,OAAO,aAAa,OAAO;AAChC,OAAK,OAAO,SAAS,OAAO,UAAU;AACtC,OAAK,OAAO,YAAY,OAAO,WAAW;;;CAI3C,AAAS,MACR,OACC;AACD,SAAO,IAAI,cACV,OACA,KAAK,OACL;;;AAIH,IAAa,gBAAb,cACSC,sDACT;CACC,QAA0BD,0BAAsB;CAEhD,AAAkB,aAAa,KAAK,OAAO;CAE3C,aAAqB;AACpB,SAAO,KAAK,OAAO,YAAY,QAAQ,KAAK,OAAO,KAAK;;;AAqB1D,SAAgB,KAAK,GAAkC,IAAyB,EAAE,EAAO;CACxF,MAAM,EAAE,MAAM,kDAAuD,GAAG,EAAE;AAC1E,QAAO,IAAI,qBAAqB,MAAM,OAAc"}