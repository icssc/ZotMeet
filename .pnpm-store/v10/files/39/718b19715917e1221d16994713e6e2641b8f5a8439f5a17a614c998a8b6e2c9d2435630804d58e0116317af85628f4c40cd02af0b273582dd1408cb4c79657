{"version":3,"file":"timestamptz.js","names":[],"sources":["../../../src/gel-core/columns/timestamptz.ts"],"sourcesContent":["import type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnyGelTable, GelTable } from '~/gel-core/table.ts';\nimport { GelColumn } from './common.ts';\nimport { GelLocalDateColumnBaseBuilder } from './date.common.ts';\n\nexport class GelTimestampTzBuilder extends GelLocalDateColumnBaseBuilder<\n\t{\n\t\tdataType: 'object date';\n\t\tdata: Date;\n\t\tdriverParam: Date;\n\t}\n> {\n\tstatic override readonly [entityKind]: string = 'GelTimestampTzBuilder';\n\n\tconstructor(\n\t\tname: string,\n\t) {\n\t\tsuper(name, 'object date', 'GelTimestampTz');\n\t}\n\n\t/** @internal */\n\toverride build(table: GelTable) {\n\t\treturn new GelTimestampTz(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class GelTimestampTz<T extends ColumnBaseConfig<'object date'>> extends GelColumn<T> {\n\tstatic override readonly [entityKind]: string = 'GelTimestampTz';\n\n\tconstructor(table: AnyGelTable<{ name: T['tableName'] }>, config: GelTimestampTzBuilder['config']) {\n\t\tsuper(table, config);\n\t}\n\n\toverride mapFromDriverValue(value: unknown): Date {\n\t\t// Needed for fields nested in RQBv2's JSON\n\t\tif (typeof value === 'string') return new Date(value as string);\n\n\t\treturn value as Date;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn 'datetime';\n\t}\n}\n\nexport function timestamptz(name?: string): GelTimestampTzBuilder {\n\treturn new GelTimestampTzBuilder(name ?? '');\n}\n"],"mappings":";;;;;AAMA,IAAa,wBAAb,cAA2C,8BAMzC;CACD,QAA0B,cAAsB;CAEhD,YACC,MACC;AACD,QAAM,MAAM,eAAe,iBAAiB;;;CAI7C,AAAS,MAAM,OAAiB;AAC/B,SAAO,IAAI,eACV,OACA,KAAK,OACL;;;AAIH,IAAa,iBAAb,cAA+E,UAAa;CAC3F,QAA0B,cAAsB;CAEhD,YAAY,OAA8C,QAAyC;AAClG,QAAM,OAAO,OAAO;;CAGrB,AAAS,mBAAmB,OAAsB;AAEjD,MAAI,OAAO,UAAU,SAAU,QAAO,IAAI,KAAK,MAAgB;AAE/D,SAAO;;CAGR,aAAqB;AACpB,SAAO;;;AAIT,SAAgB,YAAY,MAAsC;AACjE,QAAO,IAAI,sBAAsB,QAAQ,GAAG"}