{"version":3,"file":"sparsevec.cjs","names":["PgColumnBuilder","entityKind","PgColumn"],"sources":["../../../../src/pg-core/columns/vector_extension/sparsevec.ts"],"sourcesContent":["import { entityKind } from '~/entity.ts';\nimport type { PgTable } from '~/pg-core/table.ts';\nimport { getColumnNameAndConfig } from '~/utils.ts';\nimport type { PgColumnBaseConfig } from '../common.ts';\nimport { PgColumn, PgColumnBuilder } from '../common.ts';\n\nexport class PgSparseVectorBuilder extends PgColumnBuilder<\n\t{\n\t\tdataType: 'string sparsevec';\n\t\tdata: string;\n\t\tdriverParam: string;\n\t},\n\t{ vectorDimensions: number | undefined }\n> {\n\tstatic override readonly [entityKind]: string = 'PgSparseVectorBuilder';\n\n\tconstructor(name: string, config: PgSparseVectorConfig) {\n\t\tsuper(name, 'string sparsevec', 'PgSparseVector');\n\t\tthis.config.vectorDimensions = config.dimensions;\n\t}\n\n\t/** @internal */\n\toverride build(table: PgTable<any>) {\n\t\treturn new PgSparseVector(\n\t\t\ttable,\n\t\t\tthis.config as any,\n\t\t);\n\t}\n}\n\nexport class PgSparseVector\n\textends PgColumn<'string sparsevec', PgColumnBaseConfig<'string sparsevec'>, { vectorDimensions: number | undefined }>\n{\n\tstatic override readonly [entityKind]: string = 'PgSparseVector';\n\n\treadonly vectorDimensions = this.config.vectorDimensions;\n\n\tgetSQLType(): string {\n\t\treturn `sparsevec(${this.vectorDimensions})`;\n\t}\n}\n\nexport interface PgSparseVectorConfig {\n\tdimensions: number;\n}\n\nexport function sparsevec(\n\tconfig: PgSparseVectorConfig,\n): PgSparseVectorBuilder;\nexport function sparsevec(\n\tname: string,\n\tconfig: PgSparseVectorConfig,\n): PgSparseVectorBuilder;\nexport function sparsevec(a: string | PgSparseVectorConfig, b?: PgSparseVectorConfig) {\n\tconst { name, config } = getColumnNameAndConfig<PgSparseVectorConfig>(a, b);\n\treturn new PgSparseVectorBuilder(name, config);\n}\n"],"mappings":";;;;;;AAMA,IAAa,wBAAb,cAA2CA,+CAOzC;CACD,QAA0BC,0BAAsB;CAEhD,YAAY,MAAc,QAA8B;AACvD,QAAM,MAAM,oBAAoB,iBAAiB;AACjD,OAAK,OAAO,mBAAmB,OAAO;;;CAIvC,AAAS,MAAM,OAAqB;AACnC,SAAO,IAAI,eACV,OACA,KAAK,OACL;;;AAIH,IAAa,iBAAb,cACSC,wCACT;CACC,QAA0BD,0BAAsB;CAEhD,AAAS,mBAAmB,KAAK,OAAO;CAExC,aAAqB;AACpB,SAAO,aAAa,KAAK,iBAAiB;;;AAe5C,SAAgB,UAAU,GAAkC,GAA0B;CACrF,MAAM,EAAE,MAAM,kDAAwD,GAAG,EAAE;AAC3E,QAAO,IAAI,sBAAsB,MAAM,OAAO"}